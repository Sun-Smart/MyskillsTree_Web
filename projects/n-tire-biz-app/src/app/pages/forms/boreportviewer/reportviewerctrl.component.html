<!--<form  [formGroup]="boreportviewerForm" [ngClass]="theme" >-->
<div style="min-width:1200px!important;min-height:100px!important;width:100%!important;height:100%!important"
  [ngClass]="theme">
  <ngx-spinner></ngx-spinner>
  <!--class="row" style='width: 100%;left: 0;position: absolute;'-->
  <!--margin-left: 16%;width:84%!important;-->




  <div id="{{contentAreaid}}" onscroll="scrollFunction()">





    <div class="" id="maintable">



      {{configdata.header}}
      <!--
        <ngx-dashboardviewer *ngIf="dashboardid>0" [customdashboardid]="dashboardid"></ngx-dashboardviewer>
    -->
      <!--filters-->


      <div *ngIf="showmenu" class="row" id="header"
      [ngClass]="{'report-admin-bgColor': this.userrole=='Admin','report-applicant-bgColor':this.userrole=='Applicant','report-coporate-bgColor':this.userrole=='Corporate'}">

        <div class="reportheader col-3  nomargin nowrap">
          <h1 style="color:gray !important;">{{reportheader}}</h1>
        </div>

        <!-- <div class="col-6 input-group nomargin nowrap" style="display:flex; justify-content:center; align-items:center;padding: 0 5rem;">
          <i class="fa fa-search search-icon" aria-hidden="true"></i><input type="text" class="form-control" placeholder="Search"
           style="border-radius:30px !important; padding: 0 30px;height: 31px;"
           (input)="treeview?dt1.filterGlobal($event.target.value, 'contains'):dt.filterGlobal($event.target.value, 'contains')">
      <i class="fa fa-microphone microphone-icon" aria-hidden="true" style="position: relative;
      right: 2rem;
      color: #b1aaaa;
    "></i>

        </div> -->
        <div class="col-6"
          style="display: flex;justify-content: center;align-items: center;padding: 0 5rem;position: relative;bottom: 43px;z-index: 999;">
          <i class="fa fa-search search-icon" aria-hidden="true"
            style="position: relative;left: 2rem;color: #b1aaaa;"></i>
          <input type="text" class="form-control" placeholder="Search"
            (input)="treeview?dt1.filterGlobal($event.target.value, 'contains'):dt.filterGlobal($event.target.value, 'contains')"
            style="border-radius:30px !important; padding: 0 30px;height: 31px;">
          <i class="fa fa-microphone microphone-icon" aria-hidden="true" style="position: relative;
          right: 2rem;
          color: #b1aaaa;"></i>

        </div>
        <!-- <div class="col-2 input-group nomargin nowrap">
          <i class="fa fa-search search"></i>
          <input type="text" class="border form-control" placeholder="Global Filter"
            (input)="treeview?dt1.filterGlobal($event.target.value, 'contains'):dt.filterGlobal($event.target.value, 'contains')">
        </div> -->





        <div class="col-3  input-group  nomargin nowrap">

          <a [routerLink]='' (click)="onChangeAction('Add')" *ngIf="showAddJobs"><i class="fa fa-plus-circle"
            style="color:#6B431D!important;vertical-align: middle;margin-top: 8px;
            font-size: 18px;"></i></a>

          <nav class="right navbar navbar-default">
            <div class="container-fluid">
              <ul class="nav navbar-nav1">
                <li class="dropdown">
                  <!-- <a [routerLink]='' class='dropdown-toggle' data-toggle='dropdown' role='button'
                                        aria-haspopup='true' aria-expanded='false'> <span class='caret'></span></a> -->
                  <ul class="dropdown-menu">
                    <li *ngIf="canadd"><a class="dropdown-item" [routerLink]='' (click)="onChangeAction('Add')"><i
                          class="fa fa-new" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Add</a></li>
                    <ng-container *ngFor="let action of menuactions">
                      <li><a class="dropdown-item" [routerLink]='' (click)="onChangeAction(action.actionid)"><i
                            class="fa fa-new" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;{{action.description}}</a>
                      </li>
                    </ng-container>
                    <!--
                                        <li *ngIf="canedit"><a class="dropdown-item" [routerLink]=''
                                                (click)="onChangeAction('Edit')"><i class="fa fa-new"
                                                    aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Edit</a></li>

                                        <li *ngIf="checkboxavailable"><a class="dropdown-item" [routerLink]=''
                                                (click)="onChangeAction('ShowCheckbox')"><i class="fa fa-new"
                                                    aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Show Checkbox</a></li>
                                        <li><a class="dropdown-item" [routerLink]=''
                                                (click)="onChangeAction('BulkEdit')"><i class="fa fa-new"
                                                    aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Bulk Edit</a></li>
                                        <li><a class="dropdown-item" [routerLink]=''
                                                (click)="onChangeAction('Upload')"><i class="fa fa-new"
                                                    aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Upload</a></li>
                                        <li><a class="dropdown-item" [routerLink]=''
                                                (click)="onChangeAction('Print')"><i class="fa fa-new"
                                                    aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Print</a></li>
                                        <li><a class="dropdown-item" [routerLink]=''
                                                (click)="onChangeAction('Export')"><i class="fa fa-new"
                                                    aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Export</a></li>

                                        <li
                                            *ngIf="configdata!=null && configdata['alternateview']!=null  && configdata['alternateview']!=undefined && configdata['alternateview']!=''">
                                            <a class="dropdown-item" [routerLink]='' (click)="onChangeAction('List')"><i
                                                    class="fa fa-new" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;List</a>
                                        </li>
                                        <li
                                            *ngIf="configdata!=null && configdata['alternateview']!=null  && configdata['alternateview']!=undefined && configdata['alternateview']!=''">
                                            <a class="dropdown-item" [routerLink]=''
                                                (click)="onChangeAction('AlternateView')"><i class="fa fa-new"
                                                    aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Alternate View</a>
                                        </li>
                                        <li><a class="dropdown-item" [routerLink]=''
                                                (click)="onChangeAction('ShowAll')"><i class="fa fa-new"
                                                    aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Show All</a></li>
                                        <li><a class="dropdown-item" [routerLink]=''
                                                (click)="onChangeAction('Filter')"><i class="fa fa-new"
                                                    aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Filter</a></li>
                                        <li><a class="dropdown-item" [routerLink]=''
                                                (click)="onChangeAction('ClearFilter')"><i class="fa fa-new"
                                                    aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Clear Filter</a></li>
                                        <li><a class="dropdown-item" [routerLink]=''
                                                (click)="onChangeAction('SideFilter')"><i class="fa fa-new"
                                                    aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Side Filter</a></li>
                                        <li><a class="dropdown-item" [routerLink]=''
                                                (click)="onChangeAction('Email')"><i class="fa fa-new"
                                                    aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Email</a></li>
-->
                  </ul>
                </li>
              </ul>
            </div>
          </nav>
          <!--
                        <select [(ngModel)]="action" class="" (change)="onChangeAction($event.target.value)">
                            <option value="">Select Action</option>
                            <option *ngIf="canadd" value="Add">Add</option>
                            <ng-container *ngFor="let action of menuactions">
                                <option value="{{action.actionid}}">{{action.description}}</option>
                            </ng-container>
                            <option *ngIf="canedit" value="Edit">Edit</option>
                            <option *ngIf="checkboxavailable" value="ShowCheckbox">Show Checkbox</option>
                            <option value="BulkEdit">Bulk Edit</option>
                            <option value="Upload">Upload</option>
                            <option value="Print">Print</option>
                            <option value="Export">Export</option>
                            <option
                                *ngIf="configdata!=null && configdata['alternateview']!=null  && configdata['alternateview']!=undefined && configdata['alternateview']!=''"
                                value="List">List</option>
                            <option
                                *ngIf="configdata!=null && configdata['alternateview']!=null  && configdata['alternateview']!=undefined && configdata['alternateview']!=''"
                                value="AlternateView">Alternate View</option>
                            <option value="ShowAll">Show All</option>
                            <option value="Filter">Filter</option>
                            <option value="ClearFilter">Clear Filter</option>
                            <option value="SideFilter">Side Filter</option>
                            <option value="Email">Email</option>
                        </select>
                    -->
          <ng-container *ngFor="let action of menuactions">
            <button *ngIf="action.actionbutton==true && action.actionbuttonlocation!='B'" type="button" class=" border"
              (click)="onChangeAction(action.actionid)" style="color: #dee2e6!important;"><i
                class="fa fa-new"></i>&nbsp;&nbsp;&nbsp;{{action.description}}</button>
          </ng-container>

          <button type="button" style="margin: 6px 0;font-size: 10px; border-bottom-left-radius: 30px;
                    border-top-left-radius: 30px;" class="nav-link  border personal-info-btn-liftRadius"
            (click)="ExecuteAction()"><i class="fa fa-caret-right "></i></button>
          <select [(ngModel)]="filtertype" class="border personal-info-btn-rightRadius"
            (change)="onChangeFilterType($event.target.value)" style="margin: 6px 0;font-size: 14px;  border-bottom-right-radius: 30px;
                    border-top-right-radius:30px;">
            <option value="undefined" selected>Select FilterType</option>
            <option value="FF">Field Filter</option>
            <!-- <option value="T">Top Filter</option>
                        <option value="S">Side Filter</option>
                        <option value="TA">Top Advanced</option>
                        <option value="SA">Side Advanced</option> -->

            <!-- <option value="E">Expanded</option> -->
          </select>

          <a class="" [routerLink]='' (click)="onClose()"
            *ngIf="(dialogdata!=undefined && dialogdata!=null && dialogdata.ScreenType!=null)">
            <i class="fa fa-times-circle close_common_icon" style="top: 5% !important; left: 10px;"></i></a>
          <!-- <a class="nav-link active right alert-success" [routerLink]='' (click)="onClose()"
                      *ngIf="(dialogdata!=undefined && dialogdata!=null && dialogdata.ScreenType!=null)"><i
                          class="fa fa-close"></i></a> -->
        </div>
        <!--
                <div class="col-2  input-group nomargin nowrap">
                    <input type="text" class="second border" placeholder="View Name" [(ngModel)]="view" class="">
                    <button title="Save" type="button" class="nav-link btn-success" (click)="SaveView()"><i
                            class="fa fa-save"></i></button>
                </div>
                <div class="col-1  input-group nomargin nowrap">
                    <select [(ngModel)]="savedview" class="" (change)="onChangeView($event.target.value)">
                        <option value="">Select view</option>
                        <ng-container *ngFor="let savedview of savedviews">
                            <option value="{{savedview}}">{{savedview}}</option>
                        </ng-container>
                    </select>


                </div>
            -->
        {{viewfilter}}
        <!--
    <div class="col-5" style="text-align: right" role="toolbar" aria-label="Toolbar with button groups">

        <div aria-label="third group">



            <button *ngIf="canadd" title="Add" type="button" class="third btn1 cyan lighten-2"
                (click)="route('create')"><i class="fa fa-plus-circle white" aria-hidden="true"></i></button>

            <button *ngIf="canedit" title="Edit" type="button" class="third btn1 cyan lighten-2"
                (click)="route( 'edit')"><i class="fa fa-edit" aria-hidden="true"></i></button>
            <button title="Show Checkbox" *ngIf="checkboxavailable" type="button"
                class="third btn1 cyan lighten-2" (click)="dt.reset();showCheckbox()"><i class="fa fa-check"
                    aria-hidden="true"></i></button>
            <span style='color:#0bd3f7'> | </span>
            <button title="Bulk Edit" type="button" class="third btn1 cyan lighten-2" (click)="BulkEdit()"><i
                    class="fa fa-arrows" aria-hidden="true"></i></button>
            <button title="Upload" type="button" class="third btn1 cyan lighten-2" (click)="UploadData()"><i
                    class="fa fa-cloud-upload" aria-hidden="true"></i></button>

            <span style='color:#0bd3f7'> | </span>

            <button title="Print" type="button" class="third btn1 cyan lighten-2" (click)="print()"><i
                    class="fa fa-print" aria-hidden="true"></i></button>
            <button title="Export" type="button" class="third btn1 cyan lighten-2" (click)="export()"><i
                    class="fa fa-download" aria-hidden="true"></i></button>
            <span style='color:#0bd3f7'> | </span>
            <ng-container *ngFor="let action of menuactions">
                <button type="button" [title]="action.description" class="third btn1 cyan lighten-2"
                    (click)="processaction(action)"><i [ngClass]="action.actionicon"
                        aria-hidden="true"></i></button>
            </ng-container>
            <button type="button"
                *ngIf="configdata!=null && configdata['alternateview']!=null  && configdata['alternateview']!=undefined && configdata['alternateview']!=''"
                class="third btn1 cyan lighten-2" (click)="List()"><i class="fa fa-table"
                    aria-hidden="true"></i></button>
            <button title="AlternateView" type="button"
                *ngIf="configdata!=null && configdata['alternateview']!=null  && configdata['alternateview']!=undefined && configdata['alternateview']!=''"
                class="third btn1 cyan lighten-2" (click)="alternateview()"><i class="fa fa-id-card"
                    aria-hidden="true"></i></button>

            <button title="Show All" type="button" class="third btn1 cyan lighten-2" (click)="showAll()"><i
                    class="fa fa-ban" aria-hidden="true"></i></button>

            <button title="Filter" type="button" class="third btn1 cyan lighten-2" (click)="showFilter()"><i
                    class="fa fa-filter" aria-hidden="true"></i></button>
            <button type="button" class="third btn1 cyan lighten-2" (click)="email()"><i class="fa fa-envelope"
                    aria-hidden="true"></i></button>
        </div>

    </div>
-->
      </div>
      <ng-container *ngIf="configdata.sidefiltertype=='T' || configdata.sidefiltertype=='TA'">

        <div id="dtopfilter" style="display:flex;flex-wrap: wrap;">
          <ng-container *ngFor="let itemcol of cols">

            <ng-container *ngIf="itemcol.field!=groupfield && !itemcol.hide && filterExists(itemcol.field)">

              <div *ngIf="!itemcol.hide" class="col color1">
                <div class="small color1"> {{itemcol.header}}</div>

                <div class="small"><select [(ngModel)]="itemcol.filterMatchMode"
                    *ngIf="configdata.sidefiltertype=='TA' && itemcol.datatype!='n' && itemcol.datatype!='bool' ">
                    <option value="contains">contains</option>
                    <option value="startsWith">startsWith</option>
                    <option value="endsWith">endsWith</option>
                    <option value="equals">equals</option>
                    <option value="notEquals">notEquals</option>
                    <option value="in">in</option>
                    <option value="lt">lt</option>
                    <option value="lte">lte</option>
                    <option value="gt">gt</option>
                    <option value="gte">gte</option>
                  </select></div>
                <!--<p>-->
                <input style="height:20px"
                  *ngIf="((itemcol.filter == true || itemcol.filter==null|| itemcol.filter=='' )&& itemcol.dropdownItems==null && (itemcol.datatype==null || itemcol.datatype==''))"
                  pInputText type="text"
                  (input)="dt.filter($event.target.value, itemcol.field, itemcol.filterMatchMode)">
                <!--Value > {{numFilter}} {{itemcol.min}} {{itemcol.max}}-->
                <div
                  *ngIf="((itemcol.filter == true || itemcol.filter==null || itemcol.filter=='' ) && itemcol.dropdownItems==null && (itemcol.datatype=='n'))">

                  <!--   <i class="fa fa-close"
                (click)="itemcol.val=null;dt.filter(null, itemcol.field, itemcol.filterMatchMode)"
                style="cursor:pointer" *ngIf="numFilter"></i>-->
                  <p-slider [style]="{'width':'100%','margin-top':'8px'}" [(ngModel)]="itemcol.val" [min]="itemcol.min"
                    [max]="itemcol.max" (onChange)="onNumChange($event, dt,itemcol.field,itemcol.datatype)">
                  </p-slider>

                </div>
                <div
                  *ngIf="((itemcol.filter == true || itemcol.filter==null ) && itemcol.dropdownItems==null && (itemcol.datatype=='date'))">
                  <p-dropdown [options]="filters" [style]="{'width':'100%'}"
                    (onChange)="dt.filter($event.value, itemcol.field, 'in')" styleClass="ui-column-filter">
                  </p-dropdown>
                </div>
                <p-dropdown *ngIf="itemcol.datatype=='dp'" [options]="getdropdownItems(itemcol.field)"
                  [style]="{'width':'100%'}" (onChange)="dt.filter($event.value, itemcol.field, 'equals')"></p-dropdown>
                <p-multiSelect *ngIf="((itemcol.filter == true || itemcol.filter==null ) && itemcol.datatype=='ms')"
                  [options]="getdropdownItems(itemcol.field)" defaultLabel="All Colors"
                  (onChange)="dt.filter($event.value, itemcol.field, 'in')"></p-multiSelect>
                <p-checkbox *ngIf="itemcol.datatype=='bool'" value=""
                  (onChange)="dt.filter($event.value, itemcol.field, 'eq')"></p-checkbox>
                <!--</p>-->
              </div>
            </ng-container>
          </ng-container>
        </div>


      </ng-container>



      <table>
        <tr>
          <td *ngIf="configdata.sidefiltertype=='S' || configdata.sidefiltertype=='SA'">
            <ng-container *ngIf="configdata.sidefiltertype=='S' || configdata.sidefiltertype=='SA'">
              <div id="dsidefilter" class="row">
                <ng-container *ngFor="let itemcol of cols">

                  <ng-container *ngIf="itemcol.field!=groupfield && !itemcol.hide && filterExists(itemcol.field)">

                    <div *ngIf="!itemcol.hide" class="col color1" style="display:block">
                      <p class="small color1"> {{itemcol.header}} {{itemcol.datatype}}</p>
                      <p class="small"><select [(ngModel)]="itemcol.filterMatchMode"
                          *ngIf="configdata.sidefiltertype=='SA' && itemcol.datatype!='n' && itemcol.datatype!='bool' ">
                          <option value="contains">contains</option>
                          <option value="startsWith">startsWith</option>
                          <option value="endsWith">endsWith</option>
                          <option value="equals">equals</option>
                          <option value="notEquals">notEquals</option>
                          <option value="in">in</option>
                          <option value="lt">lt</option>
                          <option value="lte">lte</option>
                          <option value="gt">gt</option>
                          <option value="gte">gte</option>
                        </select></p>
                      <!--<p>-->

                      <input style="height:20px"
                        *ngIf="((itemcol.filter == true || itemcol.filter==null|| itemcol.filter=='' )&& itemcol.dropdownItems==null && (itemcol.datatype==null || itemcol.datatype==''))"
                        pInputText type="text"
                        (input)="dt.filter($event.target.value, itemcol.field, itemcol.filterMatchMode)">
                      <!--Value > {{numFilter}} {{itemcol.min}} {{itemcol.max}}-->
                      <div
                        *ngIf="((itemcol.filter == true || itemcol.filter==null || itemcol.filter=='' )  && (itemcol.datatype=='n'))">

                        <!--   <i class="fa fa-close"
                    (click)="itemcol.val=null;dt.filter(null, itemcol.field, itemcol.filterMatchMode)"
                    style="cursor:pointer" *ngIf="numFilter"></i>-->
                        <p-slider [style]="{'width':'100%','margin-top':'8px'}" [(ngModel)]="itemcol.val"
                          [min]="getmin(itemcol.field)" [max]="getmax(itemcol.field)"
                          (onChange)="onNumChange($event, dt,itemcol.field,itemcol.datatype)">
                        </p-slider>

                      </div>
                      <div
                        *ngIf="((itemcol.filter == true || itemcol.filter==null ) && itemcol.dropdownItems==null && (itemcol.datatype=='date'))">
                        <p-dropdown [options]="filters" [style]="{'width':'100%'}"
                          (onChange)="dt.filter($event.value, itemcol.field, 'in')" styleClass="ui-column-filter">
                        </p-dropdown>
                      </div>
                      <p-dropdown *ngIf="itemcol.datatype=='dp'" [options]="getdropdownItems(itemcol.field)"
                        [style]="{'width':'100%'}" (onChange)="dt.filter($event.value, itemcol.field, 'equals')">
                      </p-dropdown>
                      <p-multiSelect
                        *ngIf="((itemcol.filter == true || itemcol.filter==null ) && itemcol.datatype=='ms')"
                        [options]="getdropdownItems(itemcol.field)" defaultLabel="All Colors"
                        (onChange)="dt.filter($event.value, itemcol.field, 'in')">
                      </p-multiSelect>
                      <p-checkbox *ngIf="itemcol.datatype=='bool'" value=""
                        (onChange)="dt.filter($event.value, itemcol.field, 'eq')">
                      </p-checkbox>
                      <!--</p>-->
                    </div>
                  </ng-container>
                </ng-container>
              </div>

            </ng-container>

          </td>
          <td>
            <!--filters-->
            <ng-container *ngIf="cardtype && !kanbanview">
              <ng-container *ngFor='let rowData of data'>
                <div>
                  <a [routerLink]='' (click)='opendialog1(null,rowData)'>View</a>
                  <div class="row autogrow cardclass" [innerHTML]='getHtml(rowData)'></div>
                  <div class="row">
                    <div class="col" role='button' (click)='goroute("get",rowData["pk"],rowData)'><i class='fa fa-eye'
                        aria-hidden='true'></i></div>
                    <div class="col" role='button' (click)='goroute("edit",rowData["pk"],rowData)'>
                      <i class='fa fa-edit' aria-hidden='true'></i>
                    </div>
                  </div>
                </div>
              </ng-container>
            </ng-container>

            <ng-container *ngIf="kanbanview">
              <div class="table-container" style="display: flex;flex-wrap: wrap;">
                <div class="row">
                  <ng-container *ngFor='let rowstatusdata of statusdata'>
                    <div class="col-3">
                      <div style="display: flex;flex-wrap: wrap;" class="row">
                        <!--<div class="row">-->
                        <div class="cardclass"><span
                            style="white-space:nowrap;color:blueviolet;font-size:16px ;">{{rowstatusdata['configtext']}}</span>
                          <!--</div>-->
                          <ng-container *ngFor='let rowData of data'>
                            <div *ngIf="rowstatusdata['configkey']==rowData[kanbankey]">
                              <!--<div>-->
                              <span role='button' (click)='goroute("edit",rowData["pk"],rowData)'
                                class="autogrow cardclass" [innerHTML]='getHtml(rowData)'>
                                <!--<div class="row">-->
                                <!--    <div role='button'
                                                    (click)='goroute("create",rowData["pk"],rowData)'><i
                                                        class='fa fa-eye' aria-hidden='true'></i></div>
                                                <div role='button'
                                                    (click)='goroute("edit",rowData["pk"],rowData)'><i
                                                        class='fa fa-edit' aria-hidden='true'></i></div>-->
                              </span>
                              <!--</div>-->
                              <!--</div>-->
                            </div>
                          </ng-container>
                        </div>
                      </div>
                    </div>
                  </ng-container>
                </div>
              </div>
            </ng-container>

            <div class="table-container" *ngIf="!kanbanview">
              <p-treeTable class="maintable" *ngIf="treeview && !cardtype && !kanbanview" [value]="data" #dt1
                [columns]="cols" [(selection)]="selecteddata" [selectionMode]="selectionMode" dataKey="{{masterkey}}"
                [paginator]="paginator" [pageLinks]="5" [rows]="rowsdisplay"
                [rowsPerPageOptions]="[5,10,15,20,50,100,200,500,1000]" [expandedRowKeys]="expandedRows"
                (onPage)="paginate($event)" (onNodeSelect)="onRowSelect($event)"
                (onNodeUnselect)="onRowUnselect($event)" (onEditComplete)="onEditComplete($event)">
                <ng-template pTemplate="header" let-columns>
        <tr>
          <ng-container *ngIf="!showgroupcheckbox   && menuactions.length>0 && showmenu">
            <th></th>
          </ng-container>
          <!--
                <th *ngIf="showcheckbox">
                        <input  type="checkbox" (click)="toggleNode()" />Toggle Expand
                        <span *ngIf="isSelected"><input type="checkbox" [(ngModel)]="isSelect" (click)="selectAll()" />Select All</span>
                        <span *ngIf="isUnSelect" ><input type="checkbox" [(ngModel)]="isUnSelect" (click)="unSelectAll()" />UnSelect All</span>
                </th>
            -->
          <ng-template pTemplate="caption">
            <div style="text-align:left" *ngIf="showcheckbox">
              <p-treeTableHeaderCheckbox></p-treeTableHeaderCheckbox>
              <span style="margin-left: .25em; vertical-align: middle">Toggle All</span>
            </div>
          </ng-template>

          <th *ngFor="let col of columns">
            <ng-container *ngIf="!col.hide  && outputtype!='html'">
              {{col.header}}
            </ng-container>
          </th>
        </tr>
        </ng-template>

        <ng-template *ngIf="configdata.parentid != ''" pTemplate="body" let-rowNode let-rowData="rowData">
          <tr>
            <ng-container *ngIf="showmenu">
              <!--flex-wrap: wrap!important;-->
              <td class='col' style="width: 50px;padding: .2em .2em !important; ">
                <div class="starred">
                  <ng-container *ngIf="dialogdata.ScreenType=='2'">
                    <div class="col" role='button' (click)='goroute("get",rowData["pk"],rowData)'><i class='fa fa-eye'
                        aria-hidden='true'></i></div>
                  </ng-container>
                  <ng-container *ngIf="dialogdata.ScreenType!='2'">
                    <ng-container *ngFor="let action of menuactions">
              <td style='background-color: transparent!important'>
                <!--class="btn btn-secondary btn-sm smm active"-->

                <button class="actionbutton unstarred"
                  style="border:none;background-color: transparent!important;padding:0px!important;margin:0px!important;"
                  type="button" (click)="buttonactions(action,rowData)"><i [alt]="action.actiondescription"
                    [ngClass]="action.actionicon" aria-hidden="true"></i></button>
                <!-- <button type="button" [title]="action.description" (click)="buttonactions(action,rowData)"><i [ngClass]="action.actionicon"  aria-hidden="true"></i></button>-->
              </td>
            </ng-container>
            </ng-container>
    </div>
    </td>
    </ng-container>
    <ng-container *ngFor="let col of columns; let i = index">
      <p-treeTableToggler [rowNode]="rowNode" *ngIf="i == 0"></p-treeTableToggler>
      <td *ngIf="!col.hide">
        {{rowData[col.field]}}
      </td>

    </ng-container>
    </tr>
    </ng-template>

    <ng-template *ngIf="configdata.parentid == ''" pTemplate="body" let-rowNode let-rowData="rowData"
      let-columns="columns" let-expanded="expanded">



      <tr *ngIf="cardtype!='card'" style="background-color:#69c!important;color:white!important">
        <ng-container *ngIf="!showgroupcheckbox  && !rowNode.node.children && menuactions.length>0 && showmenu">
          <!--flex-wrap: wrap!important;-->
          <td class='col' style="width: 50px;padding: .2em .2em !important; ">
            <!--<button title="Edit" type="button" class="third dialogbtn"
                            (click)="route( 'edit',rowData['pk'])"><i class="fa fa-edit"
                                aria-hidden="true"></i></button>-->
            <div class="starred">
              <ng-container *ngIf="dialogdata.ScreenType=='2'">
                <div class="col" role='button' (click)='goroute("get",rowData["pk"],rowData)'><i class='fa fa-eye'
                    aria-hidden='true'></i></div>
              </ng-container>
              <ng-container *ngIf="dialogdata.ScreenType!='2'">
                <ng-container *ngFor="let action of menuactions">
          <td style='background-color: transparent!important'>
            <!--class="btn btn-secondary btn-sm smm active"-->

            <button class="actionbutton unstarred"
              style="border:none;background-color: transparent!important;padding:0px!important;margin:0px!important;"
              type="button" (click)="buttonactions(action,rowData)"><i [alt]="action.actiondescription"
                [ngClass]="action.actionicon" aria-hidden="true"></i></button>
            <!-- <button type="button" [title]="action.description" (click)="buttonactions(action,rowData)"><i [ngClass]="action.actionicon"  aria-hidden="true"></i></button>-->
          </td>
        </ng-container>
        </ng-container>
        <td *ngIf="dialogdata.ScreenType!='2'" style='background-color: transparent!important'>
          <button style="border:none;background-color: transparent!important" type="button" class="more"><i
              class='fa fa-ellipsis-v' aria-hidden="true"></i></button>
        </td>
  </div>
  </td>
  </ng-container>
  <!-- -->
  <td *ngIf="showcheckbox && !rowNode.node.children">
    <!-- <input type="checkbox" (click)="selectNode(rowData,$event)" name="Select{{j}}"   />-->
    <p-treeTableCheckbox [value]="rowNode"></p-treeTableCheckbox>
  </td>



  <td *ngIf="rowNode.node.children" colspan="100">
    <!--
                        <ng-container *ngIf="PrevGroupData!=''">
                                <td class="row">
                                    <table>
                                            <tr>

                                                    <td colspan=7 innerHTML="{{GetDetailFooter()}}"></td>
                                                </tr>
                                    </table>
                                </td>
                               </ng-container>
                            -->

    <table>
      <tr>

        <td style='width:5px'>
          <p-treeTableToggler [rowNode]='rowNode'></p-treeTableToggler>
        </td>
        <td [attr.colspan]="columns.length-2" innerHTML="{{GetGroupByText(rowNode.node.data)}}"></td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td [attr.colspan]="columns.length" innerHTML="{{GetDetailHeader(rowData)}}"></td>
      </tr>
    </table>
  </td>


  <ng-container *ngIf="!rowNode.node.children && (outputtype!='html' || configdata['html']=='')">
    <ng-container *ngFor="let col of columns; let i = index" class="autogrow">
      <ng-container *ngIf="col.field!=groupfield && col.field!=groupfield+'desc' && !col.hide">
        <!--td for ng-container 2nd-->
        <!--<table>
                                <tr>-->
        <td class="{{'col-lg-'+col.width}}" *ngIf="col.link" innerHTML="<a
                                            href='{{evaluate(col.linkurl,rowData)}}'>{{rowData[col.field]}}</a>">
        </td>
        <td class="autogrow" *ngIf="!col.link && !editable" innerHTML="{{rowData[col.field]}}"></td>

        <td class="{{'col-lg-'+col.width}}" *ngIf="!col.link && editable" [pEditableColumn]="rowData"
          [pEditableColumnField]="col.field">
          <p-cellEditor>
            <ng-template pTemplate="input">
              <input pInputText type="text" [(ngModel)]="rowData[col.field]"
                (keydown.shift.z)="goNextRow($event,col.field, 0)">
            </ng-template>
            <ng-template pTemplate="output">
              {{rowData[itemcol.field]}}
            </ng-template>
          </p-cellEditor>
        </td>
        <!--</tr>
                            </table>-->
      </ng-container>
    </ng-container>
  </ng-container>

  <ng-container *ngIf="!rowNode.node.children && outputtype=='html' && configdata['html']!=''">
    <td><a [routerLink]='' (click)='opendialog1(null,rowData)'>View</a></td>
    <td class="autogrow cardclass" [innerHTML]="getHtml(rowData)"></td>

    <!--card - td-->
  </ng-container>
  </tr>
  </ng-template>
  <!--
        <ng-template pTemplate="footer">

            <div innerHTML="{{GetDetailFooterLast()}}"></div>

        </ng-template>
    -->

  <!--<ng-template pTemplate="emptymessage">
    <tr>
        <td [attr.colspan]="cols.length">No data found.</td>
    </tr>
</ng-template>-->
  </p-treeTable>
</div>

<!--
    <p-table responsive-scrolling  [columns]="cols" [value]="data"  [style]="{width:'90%'}"  [scrollable]="true" scrollHeight="200px">
    -->

<div class="table-container" *ngIf="!kanbanview">


  <!--[rows]="rows"-->
  <!-- [scrollable]="true" scrollHeight="100%" -->
  <p-table responsive-scrolling [style]="{width:'100%'}" *ngIf="!treeview  && !cardtype && !kanbanview"
    class="tbllayout" #dt cellpadding="10px" (onEditInit)="onEditInit($event, rowIndex)"
    (onEditComplete)="onEditComplete($event)" (onEditCancel)="onEditCancel($event, rowIndex)" [columns]="cols"
    [first]="first" class="fit ptable" [value]="data" [selectionMode]="selectionMode" [(selection)]="selecteddata"
    dataKey="{{masterkey}}" [paginator]="true" [alwaysShowPaginator]="false" [pageLinks]="5" [rows]="rowsdisplay"
    (onRowDblclick)="onRowDblClick($event)" [rowsPerPageOptions]="[5,10,15,20,50,100,200,500,1000]"
    (onPage)="paginate($event)" (onRowSelect)="onRowSelect($event)" (onRowUnselect)="onRowUnselect($event)">




    <!--
            <ng-template pTemplate="caption">

            </ng-template>
        -->
    <!--|| (configdata['html']=='')-->
    <ng-template pTemplate="header" class="third" let-columns>
      <ng-container *ngIf="configdata!=null && (outputtype=='list'  || showfilter)">
        <ng-container *ngIf="configdata.tableheader!=null">
          <tr innerHTML="{{configdata.tableheader}}"></tr>
        </ng-container>

        <tr class="borderbottomless" *ngIf="groupfield==''">

          <ng-container *ngIf="dialogdata!=undefined">
            <th *ngIf="dialogdata.ScreenType=='2'">Popup</th>
            <th *ngIf="dialogdata.ScreenType=='3'">View</th>
            <th *ngIf="dialogdata.ScreenType=='4'">Popup</th>
          </ng-container>
          <th *ngIf="showcheckbox">
            <p-tableHeaderCheckbox style="background:white"></p-tableHeaderCheckbox>
          </th>
          <th *ngIf="menuactions && menuactions.length>0 && showmenu"
            style='width: 50px; padding: .2em .2em !important;'></th><!-- && showmenu-->
          <ng-container *ngFor="let itemcol of cols">
            <ng-container *ngIf="itemcol.field!=groupfield && !itemcol.hide  && outputtype!='html'">

              <th *ngIf="!itemcol.hide" [pSortableColumn]="itemcol.field">
                {{itemcol.header}}
                <p-sortIcon [field]="itemcol.field" ariaLabel="Activate to sort"
                  ariaLabelDesc="Activate to sort in descending order"
                  ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>
            </ng-container>
          </ng-container>
        </tr>
        <tr *ngIf="showfilter">

          <th *ngIf="showcheckbox"></th>
          <th *ngIf="menuactions && menuactions.length>0 && showmenu"></th>


          <ng-container *ngFor="let itemcol of columns">

            <ng-container *ngIf="itemcol.field!=groupfield && !itemcol.hide">

              <th *ngIf="(!itemcol.hide)" [ngSwitch]="itemcol.datatype">

                <select *ngIf="itemcol.datatype!='dp' && itemcol.datatype!='ms' " [(ngModel)]="itemcol.filterMatchMode"
                  (click)="filter(itemcol.datatype,itemcol.field)">
                  <option
                    *ngIf="itemcol.datatype!='dp' && itemcol.datatype!='ms' && itemcol.datatype!='n'  && itemcol.datatype!='date' "
                    value="contains">contains</option>
                  <option
                    *ngIf="itemcol.datatype!='dp' && itemcol.datatype!='ms' && itemcol.datatype!='n'   && itemcol.datatype!='date'  "
                    value="startsWith">startsWith</option>
                  <option
                    *ngIf="itemcol.datatype!='dp' && itemcol.datatype!='ms' && itemcol.datatype!='n'  && itemcol.datatype!='date'   "
                    value="endsWith">endsWith</option>
                  <option
                    *ngIf="itemcol.datatype!='dp' && itemcol.datatype!='ms'  && itemcol.datatype!='n'   && itemcol.datatype!='date' "
                    value="equals">equals</option>
                  <option
                    *ngIf="itemcol.datatype!='dp' && itemcol.datatype!='ms' && itemcol.datatype!='n'   && itemcol.datatype!='date'  "
                    value="notEquals">notEquals</option>
                  <option
                    *ngIf="itemcol.datatype!='dp' && itemcol.datatype!='ms' && itemcol.datatype!='n'  && itemcol.datatype!='date'   "
                    value="in">in</option>
                  <option
                    *ngIf="itemcol.datatype!='dp' && itemcol.datatype!='ms' && itemcol.datatype!='n'  && itemcol.datatype!='date'   "
                    value="lt">lt</option>
                  <option
                    *ngIf="itemcol.datatype!='dp' && itemcol.datatype!='ms' && itemcol.datatype!='n'  && itemcol.datatype!='date'   "
                    value="lte">lte</option>
                  <option
                    *ngIf="itemcol.datatype!='dp' && itemcol.datatype!='ms'  && itemcol.datatype!='n'  && itemcol.datatype!='date'  "
                    value="gt">gt</option>
                  <option
                    *ngIf="itemcol.datatype!='dp' && itemcol.datatype!='ms'  && itemcol.datatype!='n'   && itemcol.datatype!='date' "
                    value="gte">gte</option>
                  <option *ngIf="itemcol.datatype=='n' || itemcol.datatype=='date'" value="null">Null
                  </option>
                  <option *ngIf="itemcol.datatype=='n'" value="b">Between</option>
                  <option *ngIf="itemcol.datatype=='n' || itemcol.datatype=='date'" value="E">Empty
                  </option>
                </select>

                <input
                  *ngIf=" itemcol.datatype!=null  && itemcol.datatype!='dp' && itemcol.datatype!='ms'  && ((itemcol.filter == true || itemcol.filter==null|| itemcol.filter=='' )&& itemcol.dropdownItems==null && (itemcol.datatype==null || itemcol.datatype==''))"
                  pInputText type="text"
                  (input)="dt.filter($event.target.value, itemcol.field, itemcol.filterMatchMode)">
                <!--Value > {{numFilter}} {{itemcol.min}} {{itemcol.max}}-->
                <div
                  *ngIf="((itemcol.filter == true || itemcol.filter==null || itemcol.filter=='' ) && itemcol.dropdownItems==null && (itemcol.datatype=='n'))">

                  <!--   <i class="fa fa-close"
                                (click)="itemcol.val=null;dt.filter(null, itemcol.field, itemcol.filterMatchMode)"
                                style="cursor:pointer" *ngIf="numFilter"></i>-->

                  {{getmin(itemcol.field)}} - {{getmax(itemcol.field)}}<p-slider
                    [style]="{'width':'100%','margin-top':'8px'}" [(ngModel)]="itemcol.val"
                    [min]="getmin(itemcol.field)" [max]="getmax(itemcol.field)"
                    (onChange)="onNumChange($event, dt,itemcol.field,itemcol.datatype)">
                  </p-slider>{{itemcol.val}}
                </div>
                <div
                  *ngIf="((itemcol.filter == true || itemcol.filter==null ) && itemcol.dropdownItems==null && (itemcol.datatype=='date'))">


                  <p-calendar style="width:5px !important;" [(ngModel)]="dateFilters" appendTo="body"
                    selectionMode="range" [readonlyInput]="false" dateFormat="dd.mm.yy"
                    (onSelect)="onDateSelect($event,itemcol.field)">
                    <!-- <i class="fa fa-calendar" aria-hidden="true"></i> -->
                  </p-calendar>

                </div>
                <!--<p-dropdown appendTo="body"
                                        *ngIf="((itemcol.filter == true || itemcol.filter==null ) && itemcol.datatype=='dp')"
                                        [options]="getdropdownItems(itemcol.field)" [style]="{'width':'100%'}"
                                        (onChange)="dt.filter($event.value, itemcol.field, 'equals')"></p-dropdown>-->
                <p-multiSelect appendTo="body"
                  *ngIf="((itemcol.filter == true || itemcol.filter==null ) && (itemcol.datatype=='dp' || itemcol.datatype=='ms' ))"
                  [options]="getdropdownItems(itemcol.field)" defaultLabel="All Colors"
                  (onChange)="dt.filter($event.value, itemcol.field, 'in')"></p-multiSelect>
              </th>
            </ng-container>
          </ng-container>
        </tr>
      </ng-container>

    </ng-template>


    <!--   -->

    <!-- class="ng2-smart-row"   <ng-template pTemplate="body" let-item let-columns="columns">-->
    <!--
                    <ng-template pTemplate="body" let-user let-columns="columns">
                        <tr>
                            <td *ngFor="let col of columns">
                                {{user[col.field]}}
                            </td>
                        </tr>
                    </ng-template>

                <ng-template class="display: flex;flex-wrap: wrap;" pTemplate="body" [pSelectableRow]="rowData"
                let-rowData="rowData" let-rowIndex="rowIndex" let-expanded="expanded" let-columns="columns">
                -->
    <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">

      <ng-container *ngIf="outputtype=='list'">
        <!-- use it to debug
        <tr><td>{{rowIndex}}-{{rowData[groupfield]+'p'+page2}}-{{first}}-{{ (rowgroupmetadata[(rowData[groupfield]+'p'+page2)])}}</td></tr>
    -->



        <!-- To be commented  -->

        <tr class="ui-widget-header"
          *ngIf="groupfield!='' && rowgroupmetadata[rowData[groupfield]+'p'+page]!=null && rowgroupmetadata[rowData[groupfield]+'p'+page].index === rowIndex">
          <ng-container>
            <td *ngIf="showgroupcheckbox">
              <p-tableRadioButton [value]="rowData"></p-tableRadioButton>
            </td>
            <td colspan=7 innerHTML="{{GetGroupByText(rowData)}}">
              <!-- <a href="#" [pRowToggler]="rowData">
                    <i
                        [ngClass]="expanded ? 'fa fa-fw fa-chevron-circle-down' : 'fa fa-fw fa-chevron-circle-right'"></i></a>-->


            </td>
            <!--important pl.see
            <ng-container *ngFor="let itemcol of cols">
                <ng-container *ngIf="outputtype=='list' && itemcol.field!=groupfield && !itemcol.hide">
                    <td class="groupheader"  *ngIf="itemcol.field!=groupfield && !itemcol.hide" innerHTML="{{GetColData(itemcol,rowData)}}">
                            </td>
                </ng-container>
            </ng-container>
            -->
          </ng-container>
        </tr>



        <tr class="ui-widget-header"
          *ngIf="outputtype=='html' && groupfield!=''  && rowgroupmetadata[rowData[groupfield]+'p'+page]!=null && rowgroupmetadata[rowData[groupfield]+'p'+page].index === rowIndex">
          <td colspan=7 class='cardclass' innerHTML="{{GetDetailHeader(rowData)}}"></td>

        </tr>


        <tr class="borderbottomless"
          *ngIf="outputtype=='list' && groupfield!='' && rowgroupmetadata[rowData[groupfield]+'p'+page].index === rowIndex">

          <th *ngIf="menuactions.length>0 && showmenu"></th>
          <ng-container *ngFor="let itemcol of columns">

            <ng-container
              *ngIf="itemcol.field!=groupfield && itemcol.field!=groupfield+'desc' && !itemcol.hide   && outputtype!='html'">
              <th *ngIf="showcheckbox && groupfield==''"></th>

              <th [ngStyle]="colStyles(itemcol.bgcolor,itemcol.forecolor)" *ngIf="!itemcol.hide"
                class="{{'col-lg-'+itemcol.width}}" [pSortableColumn]="itemcol.field">
                {{itemcol.header}}
              </th>
            </ng-container>
          </ng-container>
        </tr>

        <!-- To be commented  -->


        <!-- [pSelectableRow]="rowData"
    </ng-template>

    <ng-template pTemplate="rowexpansion" let-rowData let-rowIndex="rowIndex">-->
        <!--[pSelectableRow]="rowData"-->
        <!--[ngClass]="{'my-class': step=='step1', 'my-class2':step=='step2' }"-->
        <!---->


        <!---->
        <tr [pSelectableRow]="rowData"
          [ngClass]="{'rowactive':(rowData['status']=='A'),'rowinactive':(rowData['status']!='A')}">





          <!--div to td-->
          <ng-container *ngIf="dialogdata!=undefined">
            <td *ngIf="dialogdata.ScreenType=='3'" class="col" role='button'
              (click)='goroute("url",rowData["pk"],rowData)'><i class='fa fa-eye' aria-hidden='true'>View</i></td>
            <td *ngIf="dialogdata.ScreenType=='4'" class="col" role='button'
              (click)='goroute("get",rowData["pk"],rowData)'><i class='fa fa-eye' aria-hidden='true'>Popup</i></td>
          </ng-container>


          <td *ngIf="showcheckbox && !showgroupcheckbox">
            <p-tableCheckbox [value]="rowData" (click)="selectNode(rowData,$event)">
            </p-tableCheckbox>
          </td>

          <ng-container *ngIf="!showgroupcheckbox && menuactions!=undefined && menuactions.length>0 && showmenu">
            <!--flex-wrap: wrap!important;-->
            <td class='col menuactions' style="width: 50px;padding: .2em .2em !important; ">

              <!-- Collect the nav links, forms, and other content for toggling -->
              <ul class="nav navbar-nav1">
                <li class="dropdown">
                  <a [routerLink]='' class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false"><span class="caret"></span></a>
                  <ul class="dropdown-menu">
                    <ng-container *ngFor="let action of menuactions">
                      <li><i class="{{'orangecolor '+action.actionicon}}"></i>&nbsp;&nbsp;<a [routerLink]=''
                          (click)="buttonactions(action,rowData)" class='padding5  medium '>{{action.description}}</a>
                      </li>

                    </ng-container>
                  </ul>
                </li>
              </ul>


            </td>
          </ng-container>



          <ng-container *ngIf="outputtype=='list' || configdata['html']==''">



            <ng-container *ngFor="let itemcol of columns">

              <!--
                <td *ngIf="groupfield!='' && itemcol.field==groupfield && (rowgroupmetadata[rowData[groupfield]+'p'+page].index === rowIndex || rowIndex%rowsdisplay===0)"
                    [attr.rowspan]="rowgroupmetadata[rowData[groupfield]+'p'+page].size">
                    <pre>{{GetGroupData(rowData,rowgroupmetadata[rowData[groupfield]+'p'+page])}}</pre>
                </td>
                -->
              <ng-container *ngIf="itemcol.field!=groupfield && !itemcol.hide">

                <td class="{{'col-lg-'+itemcol.width}}" *ngIf="itemcol.field=='customfield'">
                  <pre>{{getCustomFields(rowData['customfield'])}}</pre>
                </td>
                <td class="{{'col-lg-'+itemcol.width}}" *ngIf="itemcol.datatype=='TG'"
                  [innerHTML]="getTag(rowData[itemcol.field])">

                </td>
                <td class="{{'col-lg-'+itemcol.width}}" *ngIf="itemcol.datatype=='SS'"
                  [innerHTML]="getAccess(rowData[itemcol.field])">

                </td>
                <td class="{{'col-lg-'+itemcol.width}}" *ngIf="itemcol.datatype=='IM'">
                  <ng-container *ngIf="rowData[itemcol.field]!=null && rowData[itemcol.field]!=undefined">
                    <ng-container *ngFor="let fileobj of getJsonObject(rowData[itemcol.field])">
                      <a href="{{fileobj.name}}">{{fileobj.name}}</a> |
                    </ng-container>
                  </ng-container>
                </td>
                <td class="{{'col-lg-'+itemcol.width}}" *ngIf="itemcol.field=='attachment'">
                  <ng-container *ngFor="let fileobj of getAttachments(rowData['attachment'])">
                    <a href="{{fileobj}}">{{fileobj}}</a> |
                  </ng-container>
                </td>
                <td class="{{' col-lg-'+itemcol.width}}"
                  *ngIf="(itemcol.poptitle=='' || itemcol.poptitle==undefined) && itemcol.colhtml!='' && itemcol.colhtml!=undefined"
                  innerHTML="{{getcolHtml(rowData,itemcol.colhtml)}}">
                </td>

                <td class="{{' col-lg-'+itemcol.width}}"
                  *ngIf="itemcol.poptitle!='' && itemcol.poptitle!=undefined && itemcol.colhtml!='' && itemcol.colhtml!=undefined">
                  <button type="button" class="btn btn-outline-secondary" popoverTitle="{{rowData[itemcol.poptitle]}}"
                    [autoClose]="'inside'" ngbPopover="{{getcolHtml(rowData,itemcol.colhtml)}}">
                    {{rowData[itemcol.field]}}
                  </button>
                </td>
                <td class="{{' col-lg-'+itemcol.width}}" *ngIf="itemcol.link"><a
                    href="{{evaluate(itemcol.linkurl,rowData)}}">{{rowData[itemcol.field]}}</a>
                  <!--   <span *ngIf="!itemcol.Link">{{rowData[itemcol.field]}}</span>-->
                </td>
                <td class="{{' col-lg-'+itemcol.width}}" *ngIf="itemcol.sp"><button type="button" class="btn"
                    (click)="runsp(itemcol.spname,rowData)">{{rowData[itemcol.field]}}</button>
                  <!--   <span *ngIf="!itemcol.Link">{{rowData[itemcol.field]}}</span>-->
                </td>
                <td [ngStyle]="setcolor(itemcol,rowData)" class="{{' col-lg-'+itemcol.width}}"
                  *ngIf="!editable && itemcol.datatype!='IM'  && itemcol.datatype!='SS'  && itemcol.datatype!='TG'  && itemcol.field!='customfield' && (itemcol.colhtml=='' || itemcol.colhtml==undefined) && itemcol.field!='attachment' && !itemcol.link && !itemcol.sp"
                  innerHTML="{{rowData[itemcol.field]}}">
                </td>

                <td class=""
                  *ngIf="editable && itemcol.datatype!='IM'  && itemcol.datatype!='TG' && itemcol.field!='customfield' && (itemcol.colhtml=='' || itemcol.colhtml==undefined) && itemcol.field!='attachment' && !itemcol.link && !itemcol.sp"
                  [pEditableColumn]="rowData" [pEditableColumnField]="itemcol.field"
                  id="{{'col'+itemcol.field+rowIndex}}">
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <input id="{{itemcol.field + rowIndex}}" pInputText type="text"
                        [(ngModel)]="rowData[itemcol.field]"
                        (keydown.shift.z)="goNextRow($event,itemcol.field, rowIndex)">
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{rowData[itemcol.field]}}
                    </ng-template>
                  </p-cellEditor>
                </td>

              </ng-container>

            </ng-container>
          </ng-container>
          <!--class="card"-->
          <ng-container *ngIf="outputtype=='html' && configdata['html']!=''">
            <!--
                <td class='col'  style="display: flex!important; flex-wrap: wrap!important;">
                <ng-container *ngFor="let action of menuactions">
                    <td>
                    <button type="button" (click)="buttonactions(action,rowData)"><i [ngClass]="action.actionicon" [alt]="action.description" aria-hidden="true"></i></button>
                </td>
                </ng-container>
                </td>
            -->
            <td><a [routerLink]='' (click)='opendialog1(null,rowData)'>View</a></td>
            <td class="cardclass col" [innerHTML]="getHtml(rowData)">
            </td>


          </ng-container>


        </tr>


        <!-- rowgroupmetadata[rowData[groupfield]+'p'+page]!=null && rowgroupmetadata[rowData[groupfield]+'p'+page].index === rowIndex"-->
        <!--+ rowgroupmetadata[rowData[groupfield]+'p'+page].size -1-->



        <tr class="ui-widget-footer"
          *ngIf="groupfield!=''  && rowgroupmetadata[rowData[groupfield]+'p'+page]!=null && (rowgroupmetadata[rowData[groupfield]+'p'+page].index+ rowgroupmetadata[rowData[groupfield]+'p'+page].size -1   === rowIndex)">
          <td colspan=7 innerHTML="{{GetDetailFooter()}}"></td>
        </tr>
      </ng-container>
      <!--  </ng-template>-->
      <ng-container *ngIf="outputtype=='html'">
        <div style="display:inline-block;width:fit-content!important;border:none!important"
          class="cardclass col ui-widget-content">
          <!-- col-3-->

          <ng-container *ngIf="!showgroupcheckbox && menuactions.length>0 && showmenu">
            <!--flex-wrap: wrap!important;-->
            <td class='col' style="width: 50px;padding: .2em .2em !important; ">
              <div class="starred">

            <td style='background-color: transparent!important'>
              <!--class="btn btn-secondary btn-sm smm active"-->

              <div class='moredrop' appendTo="body" id="{{'divrow'+rowIndex}}" style="display:none">
                <ul>
                  <ng-container *ngFor="let action of menuactions">


                    <li (mousedown)="buttonactions(action,rowData)"><i [alt]="action.actiondescription"
                        [ngClass]="action.actionicon"></i><span class='label'>{{action.description}}</span></li>
                  </ng-container>
                </ul>
              </div>


              <button style="border:none;background-color: transparent!important;display:none" type="button"
                (click)="moreclick(rowIndex)" (blur)="bgclick(rowIndex)" class="more"><i class='fa fa-ellipsis-v'
                  aria-hidden="true"></i></button>

              <!--
                    <button *ngIf="condition(action,rowData)" class="actionbutton unstarred"
                        style="border:none;background-color: transparent!important;padding:0px!important;margin:0px!important;"
                        type="button" (click)="buttonactions(action,rowData)"><i [alt]="action.actiondescription"
                            [ngClass]="action.actionicon" aria-hidden="true"></i></button>-->
              <!-- <button type="button" [title]="action.description" (click)="buttonactions(action,rowData)"><i [ngClass]="action.actionicon"  aria-hidden="true"></i></button>-->
            </td>


        </div>
        </td>
      </ng-container>
      <!--
            <ul class="dropdown-menu">
                <ng-container *ngFor="let action of menuactions">
                    <li><a class="dropdown-item" [routerLink]='' (click)="buttonactions(action,rowData)"><i [alt]="action.actiondescription" [ngClass]="action.actionicon"></i>&nbsp;&nbsp;&nbsp;{{action.description}}</a></li>
                </ng-container>
            </ul>
        -->

      <div style='width:fit-content;' [innerHTML]="getHtml(rowData)"></div>

      <div *ngIf="configdata.rowoutputype!='B' && rowData.header1!=''"
        style="white-space: pre-wrap; background-color: transparent;line-height: 2px;">
        {{rowData.header1}}
      </div>
      <div class="row">
        <div class="col-3">
          <ng-container *ngIf="showcheckbox && !showgroupcheckbox">
            <p-checkbox [value]="rowData" [(ngModel)]="selecteddata" (click)="CheckboxSelect(rowData,$event)">
            </p-checkbox>
          </ng-container>
        </div>


        <div class="col-3" style="display: flex !important;">
          <ng-container *ngFor="let action of menuactions">
            <div *ngIf="action.actionbutton==true && action.actionbuttonlocation=='B'">
              <!-- <div class="row"> -->
              <span *ngIf="action.description == 'Selected'">
                <i class="fa fa-check-circle" style="font-size:30px;color: green;"
                  (click)="onChangeAction(action.actionid)"></i>
              </span>&nbsp;&nbsp;
              <span *ngIf="action.description == 'Rejected'">
                <i class="fa fa-times-circle" style="font-size:30px;color: red;"
                  (click)="onChangeAction(action.actionid)"></i>
              </span>

              <!-- </div> -->
              <!-- <button *ngIf="action.actionbutton==true && action.actionbuttonlocation=='B'" type="button" class="btn-success"
                        (click)="onChangeAction(action.actionid)"><i
                            class="fa fa-new"></i>&nbsp;&nbsp;&nbsp;{{action.description}}</button> -->
            </div>
          </ng-container>
        </div>
        <div class="col-2"></div>
        <div class="col-3">
          <i class="fa fa-eye" style="font-size: 20px !important; margin-top: 7px;"
            (click)='opendialog1(null,rowData)'></i>
          <!-- <a [routerLink]='' (click)='opendialog1(null,rowData)'>View</a> -->
        </div>
      </div>



      <p-table responsive-scrolling [scrollable]="true" scrollHeight="100%" *ngIf="header1cols.length>0"
        [value]="rowData.header1results">
        <ng-template pTemplate="header" let-columns>
          <tr>
            <th *ngFor="let col of header1cols">
              <font style="color:blue"> {{col.header}}</font>
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-columns="columns">
          <tr style="height:30px">
            <td *ngFor="let col of header1cols">
              <font style="color:#000">{{rowData[col.field]}}</font>
            </td>
          </tr>
        </ng-template>
        <!--<ng-template pTemplate="emptymessage">
                <tr>
                    <td [attr.colspan]="cols.length">No data found.</td>
                </tr>
            </ng-template>-->
      </p-table>


</div>



</ng-container>






</ng-template>






<!--
<ng-template pTemplate="footer" *ngIf="configdata.reportoutputtype!='B'">

    <tr>
        <td></td>
        <ng-container *ngFor="let itemcol of columns">
            <ng-container *ngIf="!itemcol.hide">
                <td style="border:0px">
                    {{getColTotal(itemcol.field)}}
                </td>
            </ng-container>
        </ng-container>
    </tr>

</ng-template>
-->
</p-table>
<!--</ng-scrollbar>-->
</div>


</td>
</tr>
</table>

<!--
<div *ngIf="configdata!=undefined && configdata.SQL!=undefined && contentAreaid =='reportmaincontent'">
    SQL:{{configdata.SQL}}</div>
<div *ngIf="configdata!=undefined && configdata.headerquery1!=undefined && contentAreaid =='reportmaincontent' ">
    headerquery1:{{configdata.headerquery1}}</div>
<div *ngIf="configdata!=undefined && configdata.headerSQL!=undefined && contentAreaid =='reportmaincontent'">
    headerSQL:{{configdata.headerSQL}}</div>
<div *ngIf="configdata!=undefined && configdata.footerSQL!=undefined && contentAreaid =='reportmaincontent' ">
    footerSQL:{{configdata.footerSQL}}</div>
<div *ngIf="configdata!=undefined && configdata.kanbanSQL!=undefined && contentAreaid =='reportmaincontent' ">
    kanbanSQL:{{configdata.kanbanSQL}}</div>

<div style="white-space: pre-wrap;" *ngIf="configdata.reportoutputtype!='B' && configdata.footer!=''">
    {{configdata.footer}}
</div>
-->




</div>




</div>





<div class="row">
  <div class="col-12">
    <div class='full-width'
      *ngIf="customfieldvisible  && customfieldservicelist!=null && customfieldservicelist!=undefined  && customfieldservicelist.fields.length>0 && data.length>0">

      <div class="form-group row"
        *ngIf="customfieldservicelist!=null && customfieldservicelist!=undefined   &&(customfieldservicelist.formhtml!=null || customfieldservicelist.templatehtml!=null || (customfieldservicelist.fields!=[] && customfieldservicelist.fields.length>0))">
        <dynamic-form-builder [customfields]="customfieldservicelist" #customform></dynamic-form-builder>
      </div>

    </div>
  </div>
</div>



</div>



<!--</form>-->